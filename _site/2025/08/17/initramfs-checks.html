<hr />
<p>layout: post
 title: Understanding Initramfs Checks for Linux+ Prep
 date: 2025-08-17
 —
 # Understanding Initramfs Checks for Linux+ Prep</p>

<p>As part of my <strong>CompTIA Linux+</strong> studies, I’m diving into the Linux boot process, focusing on the initramfs stage. Below is a summary of key checks to perform before and after initramfs to troubleshoot boot issues, based on my recent learning.</p>

<p>## Before Initramfs (Pre-Boot Preparation)
 These checks ensure the system is ready to load the initramfs:</p>
<ul>
  <li><strong>Kernel Image and Modules</strong>: Verify the kernel file (<code class="language-plaintext highlighter-rouge">/boot/vmlinuz</code>) exists and isn’t corrupted. Check <code class="language-plaintext highlighter-rouge">/lib/modules/$(uname -r)/</code> for required modules using <code class="language-plaintext highlighter-rouge">lsmod</code>.</li>
  <li><strong>Boot Loader Configuration</strong>: Inspect GRUB config (<code class="language-plaintext highlighter-rouge">/boot/grub/grub.cfg</code> or <code class="language-plaintext highlighter-rouge">/etc/default/grub</code>) for correct parameters like <code class="language-plaintext highlighter-rouge">root=UUID=...</code> or <code class="language-plaintext highlighter-rouge">initrd=/initramfs.img</code>.</li>
  <li><strong>Hardware Detection</strong>: Confirm BIOS/UEFI settings allow booting from the correct device. Update firmware if hardware isn’t recognized.</li>
  <li><strong>File System Integrity</strong>: Run <code class="language-plaintext highlighter-rouge">fsck</code> on the root partition to fix errors before booting.</li>
  <li><strong>Dependencies</strong>: Ensure drivers for storage controllers are included in the kernel or initramfs.</li>
</ul>

<p>## After Initramfs (Post-Handover to Root FS)
 These checks verify the system transitions correctly to the root filesystem:</p>
<ul>
  <li><strong>Root File System Mount</strong>: Check if the root FS is mounted (<code class="language-plaintext highlighter-rouge">mount | grep root</code>). If not, drop to a shell and mount manually.</li>
  <li><strong>Logs Review</strong>: Use <code class="language-plaintext highlighter-rouge">dmesg | grep error</code> or check <code class="language-plaintext highlighter-rouge">/var/log/boot.log</code> for initramfs errors (e.g., missing modules).</li>
  <li><strong>Process Handover</strong>: Confirm <code class="language-plaintext highlighter-rouge">systemd</code> (or init) started with <code class="language-plaintext highlighter-rouge">ps aux | grep init</code> or <code class="language-plaintext highlighter-rouge">journalctl</code>.</li>
  <li><strong>Module Loading</strong>: Verify modules loaded with <code class="language-plaintext highlighter-rouge">lsmod</code>; reload with <code class="language-plaintext highlighter-rouge">modprobe</code> if needed.</li>
  <li><strong>Emergency Mode</strong>: If in an emergency shell, check <code class="language-plaintext highlighter-rouge">/proc/mounts</code> and fix issues like incorrect UUID in <code class="language-plaintext highlighter-rouge">/etc/fstab</code>.</li>
</ul>

<p>## Reflections
 These checks are critical for debugging boot failures, a key skill for Linux+. Practicing commands like <code class="language-plaintext highlighter-rouge">fsck</code> and <code class="language-plaintext highlighter-rouge">dmesg</code> on my Ubuntu VM has been super helpful. Next, I’ll explore RAID setups and simulate boot failures for deeper understanding.</p>

<p>Stay tuned for more Linux+ notes!</p>
